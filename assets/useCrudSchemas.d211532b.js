import{_ as e}from"./ContentWrap.81130664.js";import{_ as a}from"./Search.19fb576e.js";import{d as t,cv as o,s,aN as l,c5 as i,r,o as m,k as n,w as p,a as c,l as d,g as f,e as u,y as b,t as g}from"./index.c89981a6.js";import{E as j}from"./el-button.9191f867.js";import{E as h}from"./el-tag.b693244d.js";import{_ as w}from"./Table.vue_vue_type_script_lang.9e4a700a.js";import{g as v,d as D}from"./index.39d8d6da.js";import{u as S}from"./useTable.5d295504.js";import{u as x}from"./useCrudSchemas.98d2cc93.js";import"./el-card.377296af.js";import"./el-popper.bf812a74.js";import"./index.ae55fe18.js";import"./Form.6c4fc45b.js";import"./el-col.f8fe7e78.js";import"./el-input.196c2db0.js";import"./event.fa25aaef.js";import"./index.68586847.js";import"./tsxHelper.2791fffb.js";import"./index.fc556847.js";import"./scroll.26923679.js";import"./debounce.959d57d3.js";import"./validator.94a90169.js";import"./el-input-number.a0d9ed48.js";import"./el-switch.89faef36.js";import"./el-divider.99cce6ba.js";import"./InputPassword.d8303976.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Editor.f7c8f5d8.js";import"./aria.1f702b5f.js";import"./browser.f8fe7a4c.js";import"./useForm.d93ff7d4.js";import"./el-message-box.824cc255.js";import"./el-overlay.5172f9ee.js";import"./vnode.e360c4a1.js";import"./tree.9e4d3f05.js";const _={class:"mb-10px"},y=t({__name:"useCrudSchemas",setup(t){const y=o(),{register:P,tableObject:C,methods:R}=S({getListApi:v,delListApi:D,response:{list:"list",total:"total"}}),{getList:k,setSearchParams:z}=R;k();const{t:L}=d(),E=s([{field:"index",label:L("tableDemo.index"),type:"index",form:{show:!1},detail:{show:!1}},{field:"title",label:L("tableDemo.title"),search:{show:!0},form:{colProps:{span:24}},detail:{span:24}},{field:"author",label:L("tableDemo.author")},{field:"display_time",label:L("tableDemo.displayTime"),form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:L("tableDemo.importance"),formatter:(e,a,t)=>l(h,{type:1===t?"success":2===t?"warning":"danger"},(()=>L(1===t?"tableDemo.important":2===t?"tableDemo.good":"tableDemo.commonly"))),search:{show:!0,component:"Select",componentProps:{options:y.getDictObj.importance}},form:{component:"Select",componentProps:{options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}}},{field:"importance2",label:`${L("tableDemo.importance")}2`,search:{show:!0,component:"Select",dictName:"importance"}},{field:"importance3",label:`${L("tableDemo.importance")}3`,search:{show:!0,component:"Select",api:async()=>(await i()).data}},{field:"pageviews",label:L("tableDemo.pageviews"),form:{component:"InputNumber",value:0}},{field:"content",label:L("exampleDemo.content"),table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24}},{field:"action",width:"260px",label:L("tableDemo.action"),form:{show:!1},detail:{show:!1}}]),{allSchemas:Y}=x(E),F=r(!1),H=async(e,a)=>{var t;C.currentRow=e;const{delList:o,getSelections:s}=R,l=await s();F.value=!0,await o(a?l.map((e=>e.id)):[null==(t=C.currentRow)?void 0:t.id],a).finally((()=>{F.value=!1}))};return(t,o)=>(m(),n(c(e),null,{default:p((()=>[f(c(a),{schema:c(Y).searchSchema,onSearch:c(z),onReset:c(z)},null,8,["schema","onSearch","onReset"]),u("div",_,[f(c(j),{loading:F.value,type:"danger",onClick:o[0]||(o[0]=e=>H(null,!0))},{default:p((()=>[b(g(c(L)("exampleDemo.del")),1)])),_:1},8,["loading"])]),f(c(w),{pageSize:c(C).pageSize,"onUpdate:pageSize":o[1]||(o[1]=e=>c(C).pageSize=e),currentPage:c(C).currentPage,"onUpdate:currentPage":o[2]||(o[2]=e=>c(C).currentPage=e),columns:c(Y).tableColumns,data:c(C).tableList,loading:c(C).loading,pagination:{total:c(C).total},onRegister:c(P)},{action:p((({row:e})=>[f(c(j),{type:"danger",onClick:a=>H(e,!1)},{default:p((()=>[b(g(c(L)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}});export{y as default};
