import{_ as e}from"./ContentWrap.259c4c25.js";import{_ as a}from"./Search.2091f684.js";import{d as t,cv as o,s,aN as l,c5 as i,r,o as m,k as n,w as p,a as c,l as d,g as f,e as b,y as u,t as g}from"./index.976d50ce.js";import{E as j}from"./el-button.c8459927.js";import{E as h}from"./el-tag.645861df.js";import{_ as w}from"./Table.vue_vue_type_script_lang.3ddaf0f5.js";import{g as v,d as D}from"./index.ce57110e.js";import{u as S}from"./useTable.6b1ce3fa.js";import{u as x}from"./useCrudSchemas.5416582f.js";import"./el-card.f8734a1a.js";import"./el-popper.8324f673.js";import"./index.caa1c62b.js";import"./Form.92ef4b20.js";import"./el-col.165da7c3.js";import"./el-input.37bc8bcd.js";import"./event.fa25aaef.js";import"./index.95ab9e3a.js";import"./tsxHelper.4ba93dcc.js";import"./index.8a7d4f28.js";import"./scroll.674261f8.js";import"./debounce.04b5c6f2.js";import"./validator.467ff7cf.js";import"./el-input-number.348397c8.js";import"./el-switch.edd93c60.js";import"./el-divider.0d268fa1.js";import"./InputPassword.c0e7e760.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Editor.bc5101ac.js";import"./aria.1f702b5f.js";import"./browser.19fcc186.js";import"./useForm.cb9836af.js";import"./el-message-box.9cb5f008.js";import"./el-overlay.53cd8302.js";import"./vnode.53e58796.js";import"./tree.9e4d3f05.js";const _={class:"mb-10px"},y=t({__name:"useCrudSchemas",setup(t){const y=o(),{register:P,tableObject:C,methods:R}=S({getListApi:v,delListApi:D,response:{list:"list",total:"total"}}),{getList:k,setSearchParams:z}=R;k();const{t:L}=d(),E=s([{field:"index",label:L("tableDemo.index"),type:"index",form:{show:!1},detail:{show:!1}},{field:"title",label:L("tableDemo.title"),search:{show:!0},form:{colProps:{span:24}},detail:{span:24}},{field:"author",label:L("tableDemo.author")},{field:"display_time",label:L("tableDemo.displayTime"),form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:L("tableDemo.importance"),formatter:(e,a,t)=>l(h,{type:1===t?"success":2===t?"warning":"danger"},(()=>L(1===t?"tableDemo.important":2===t?"tableDemo.good":"tableDemo.commonly"))),search:{show:!0,component:"Select",componentProps:{options:y.getDictObj.importance}},form:{component:"Select",componentProps:{options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}}},{field:"importance2",label:`${L("tableDemo.importance")}2`,search:{show:!0,component:"Select",dictName:"importance"}},{field:"importance3",label:`${L("tableDemo.importance")}3`,search:{show:!0,component:"Select",api:async()=>(await i()).data}},{field:"pageviews",label:L("tableDemo.pageviews"),form:{component:"InputNumber",value:0}},{field:"content",label:L("exampleDemo.content"),table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24}},{field:"action",width:"260px",label:L("tableDemo.action"),form:{show:!1},detail:{show:!1}}]),{allSchemas:Y}=x(E),F=r(!1),H=async(e,a)=>{var t;C.currentRow=e;const{delList:o,getSelections:s}=R,l=await s();F.value=!0,await o(a?l.map((e=>e.id)):[null==(t=C.currentRow)?void 0:t.id],a).finally((()=>{F.value=!1}))};return(t,o)=>(m(),n(c(e),null,{default:p((()=>[f(c(a),{schema:c(Y).searchSchema,onSearch:c(z),onReset:c(z)},null,8,["schema","onSearch","onReset"]),b("div",_,[f(c(j),{loading:F.value,type:"danger",onClick:o[0]||(o[0]=e=>H(null,!0))},{default:p((()=>[u(g(c(L)("exampleDemo.del")),1)])),_:1},8,["loading"])]),f(c(w),{pageSize:c(C).pageSize,"onUpdate:pageSize":o[1]||(o[1]=e=>c(C).pageSize=e),currentPage:c(C).currentPage,"onUpdate:currentPage":o[2]||(o[2]=e=>c(C).currentPage=e),columns:c(Y).tableColumns,data:c(C).tableList,loading:c(C).loading,pagination:{total:c(C).total},onRegister:c(P)},{action:p((({row:e})=>[f(c(j),{type:"danger",onClick:a=>H(e,!1)},{default:p((()=>[u(g(c(L)("exampleDemo.del")),1)])),_:2},1032,["onClick"])])),_:1},8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}});export{y as default};
